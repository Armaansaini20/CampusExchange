{"ast":null,"code":"import{useEffect,useState}from\"react\";import Header from\"./Header\";import{useNavigate,Link}from\"react-router-dom\";import axios from\"axios\";import Categories from\"./Categories\";import{FaHeart}from\"react-icons/fa\";import'./Home.css';import API_URL from\"../constants\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const navigate=useNavigate();const[products,setproducts]=useState([]);const[cproducts,setcproducts]=useState([]);const[search,setsearch]=useState('');const[issearch,setissearch]=useState(false);// useEffect(() => {\n//     if (!localStorage.getItem('token')) {\n//         navigate('/login')\n//     }\n// }, [])\nuseEffect(()=>{const url=API_URL+'/get-products';axios.get(url).then(res=>{if(res.data.products){setproducts(res.data.products);}}).catch(err=>{alert('Server Err.');});},[]);const handlesearch=value=>{setsearch(value);};const handleClick=()=>{const url=API_URL+'/search?search='+search+'&loc='+localStorage.getItem('userLoc');axios.get(url).then(res=>{setcproducts(res.data.products);setissearch(true);}).catch(err=>{alert('Server Err.');});// let filteredProducts = products.filter((item) => {\n//     if (item.pname.toLowerCase().includes(search.toLowerCase()) ||\n//         item.pdesc.toLowerCase().includes(search.toLowerCase()) ||\n//         item.category.toLowerCase().includes(search.toLowerCase())) {\n//         return item;\n//     }\n// })\n// setcproducts(filteredProducts)\n};const handleCategory=value=>{let filteredProducts=products.filter((item,index)=>{if(item.category==value){return item;}});setcproducts(filteredProducts);};const handleLike=(productId,e)=>{e.stopPropagation();let userId=localStorage.getItem('userId');if(!userId){alert('Please Login first.');return;}const url=API_URL+'/like-product';const data={userId,productId};axios.post(url,data).then(res=>{if(res.data.message){alert('Liked.');}}).catch(err=>{alert('Server Err.');});};const handleProduct=id=>{navigate('/product/'+id);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{search:search,handlesearch:handlesearch,handleClick:handleClick}),/*#__PURE__*/_jsx(Categories,{handleCategory:handleCategory}),issearch&&cproducts&&/*#__PURE__*/_jsxs(\"h5\",{children:[\" SEARCH RESULTS\",/*#__PURE__*/_jsx(\"button\",{className:\"clear-btn\",onClick:()=>setissearch(false),children:\" CLEAR \"})]}),issearch&&cproducts&&cproducts.length==0&&/*#__PURE__*/_jsx(\"h5\",{children:\" No Results Found \"}),issearch&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center flex-wrap\",children:cproducts&&products.length>0&&cproducts.map((item,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-3 \",children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleLike(item._id),className:\"icon-con\",children:/*#__PURE__*/_jsx(FaHeart,{className:\"icons\"})}),/*#__PURE__*/_jsx(\"img\",{width:\"300px\",height:\"200px\",src:API_URL+'/'+item.pimage}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2\",children:[\" \",item.pname,\"  | \",item.category,\" \"]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"m-2 text-danger\",children:[\" \",item.price,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2 text-success\",children:[\" \",item.pdesc,\" \"]})]},item._id);})}),!issearch&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center flex-wrap\",children:products&&products.length>0&&products.map((item,index)=>{return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleProduct(item._id),className:\"card m-3\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:e=>handleLike(item._id,e),className:\"icon-con\",children:/*#__PURE__*/_jsx(FaHeart,{className:\"icons\"})}),/*#__PURE__*/_jsx(\"img\",{width:\"250px\",height:\"150px\",src:API_URL+'/'+item.pimage}),/*#__PURE__*/_jsxs(\"h3\",{className:\"m-2 price-text\",children:[\" Rs. \",item.price,\" /- \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2\",children:[\" \",item.pname,\"  | \",item.category,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"m-2 text-success\",children:[\" \",item.pdesc,\" \"]})]},item._id);})})]});}export default Home;","map":{"version":3,"names":["useEffect","useState","Header","useNavigate","Link","axios","Categories","FaHeart","API_URL","jsx","_jsx","jsxs","_jsxs","Home","navigate","products","setproducts","cproducts","setcproducts","search","setsearch","issearch","setissearch","url","get","then","res","data","catch","err","alert","handlesearch","value","handleClick","localStorage","getItem","handleCategory","filteredProducts","filter","item","index","category","handleLike","productId","e","stopPropagation","userId","post","message","handleProduct","id","children","className","onClick","length","map","_id","width","height","src","pimage","pname","price","pdesc"],"sources":["C:/Users/DELL/Documents/GitHub/olx-clone/react-application/src/components/Home.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Header from \"./Header\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Categories from \"./Categories\";\r\nimport { FaHeart } from \"react-icons/fa\";\r\nimport './Home.css';\r\nimport API_URL from \"../constants\";\r\n\r\n\r\nfunction Home() {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const [products, setproducts] = useState([]);\r\n    const [cproducts, setcproducts] = useState([]);\r\n    const [search, setsearch] = useState('');\r\n    const [issearch, setissearch] = useState(false);\r\n\r\n    // useEffect(() => {\r\n    //     if (!localStorage.getItem('token')) {\r\n    //         navigate('/login')\r\n    //     }\r\n    // }, [])\r\n\r\n    useEffect(() => {\r\n        const url = API_URL + '/get-products';\r\n        axios.get(url)\r\n            .then((res) => {\r\n                if (res.data.products) {\r\n                    setproducts(res.data.products);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                alert('Server Err.')\r\n            })\r\n    }, [])\r\n\r\n    const handlesearch = (value) => {\r\n        setsearch(value);\r\n    }\r\n\r\n    const handleClick = () => {\r\n\r\n        const url = API_URL + '/search?search=' + search + '&loc=' + localStorage.getItem('userLoc');\r\n        axios.get(url)\r\n            .then((res) => {\r\n                setcproducts(res.data.products);\r\n                setissearch(true);\r\n            })\r\n            .catch((err) => {\r\n                alert('Server Err.')\r\n            })\r\n\r\n        // let filteredProducts = products.filter((item) => {\r\n        //     if (item.pname.toLowerCase().includes(search.toLowerCase()) ||\r\n        //         item.pdesc.toLowerCase().includes(search.toLowerCase()) ||\r\n        //         item.category.toLowerCase().includes(search.toLowerCase())) {\r\n        //         return item;\r\n        //     }\r\n        // })\r\n        // setcproducts(filteredProducts)\r\n\r\n    }\r\n\r\n    const handleCategory = (value) => {\r\n        let filteredProducts = products.filter((item, index) => {\r\n            if (item.category == value) {\r\n                return item;\r\n            }\r\n        })\r\n        setcproducts(filteredProducts)\r\n    }\r\n\r\n    const handleLike = (productId, e) => {\r\n        e.stopPropagation();\r\n        let userId = localStorage.getItem('userId');\r\n\r\n        if (!userId) {\r\n            alert('Please Login first.')\r\n            return;\r\n        }\r\n\r\n        const url = API_URL + '/like-product';\r\n        const data = { userId, productId }\r\n        axios.post(url, data)\r\n            .then((res) => {\r\n                if (res.data.message) {\r\n                    alert('Liked.')\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                alert('Server Err.')\r\n            })\r\n\r\n    }\r\n\r\n\r\n    const handleProduct = (id) => {\r\n        navigate('/product/' + id)\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Header search={search} handlesearch={handlesearch} handleClick={handleClick} />\r\n            <Categories handleCategory={handleCategory} />\r\n            {issearch && cproducts &&\r\n                <h5> SEARCH RESULTS\r\n                    <button className=\"clear-btn\" onClick={() => setissearch(false)}> CLEAR </button>\r\n                </h5>}\r\n\r\n            {issearch && cproducts && cproducts.length == 0 && <h5> No Results Found </h5>}\r\n            {issearch && <div className=\"d-flex justify-content-center flex-wrap\">\r\n                {cproducts && products.length > 0 &&\r\n                    cproducts.map((item, index) => {\r\n\r\n                        return (\r\n                            <div key={item._id} className=\"card m-3 \">\r\n                                <div onClick={() => handleLike(item._id)} className=\"icon-con\">\r\n                                    <FaHeart className=\"icons\" />\r\n                                </div>\r\n                                <img width=\"300px\" height=\"200px\" src={API_URL + '/' + item.pimage} />\r\n\r\n                                <p className=\"m-2\"> {item.pname}  | {item.category} </p>\r\n                                <h3 className=\"m-2 text-danger\"> {item.price} </h3>\r\n                                <p className=\"m-2 text-success\"> {item.pdesc} </p>\r\n                            </div>\r\n                        )\r\n\r\n                    })}\r\n            </div>}\r\n\r\n            {!issearch && <div className=\"d-flex justify-content-center flex-wrap\">\r\n                {products && products.length > 0 &&\r\n                    products.map((item, index) => {\r\n\r\n                        return (\r\n                            <div onClick={() => handleProduct(item._id)} key={item._id} className=\"card m-3\">\r\n                                <div onClick={(e) => handleLike(item._id, e)} className=\"icon-con\">\r\n                                    <FaHeart className=\"icons\" />\r\n                                </div>\r\n                                <img width=\"250px\" height=\"150px\" src={API_URL + '/' + item.pimage} />\r\n                                <h3 className=\"m-2 price-text\"> Rs. {item.price} /- </h3>\r\n                                <p className=\"m-2\"> {item.pname}  | {item.category} </p>\r\n                                <p className=\"m-2 text-success\"> {item.pdesc} </p>\r\n                            </div>\r\n                        )\r\n\r\n                    })}\r\n            </div>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,OAASC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,OAAO,KAAQ,gBAAgB,CACxC,MAAO,YAAY,CACnB,MAAO,CAAAC,OAAO,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGnC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CAEZ,KAAM,CAAAC,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACkB,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAE/C;AACA;AACA;AACA;AACA;AAEAD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAuB,GAAG,CAAGf,OAAO,CAAG,eAAe,CACrCH,KAAK,CAACmB,GAAG,CAACD,GAAG,CAAC,CACTE,IAAI,CAAEC,GAAG,EAAK,CACX,GAAIA,GAAG,CAACC,IAAI,CAACZ,QAAQ,CAAE,CACnBC,WAAW,CAACU,GAAG,CAACC,IAAI,CAACZ,QAAQ,CAAC,CAClC,CACJ,CAAC,CAAC,CACDa,KAAK,CAAEC,GAAG,EAAK,CACZC,KAAK,CAAC,aAAa,CAAC,CACxB,CAAC,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAIC,KAAK,EAAK,CAC5BZ,SAAS,CAACY,KAAK,CAAC,CACpB,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAEtB,KAAM,CAAAV,GAAG,CAAGf,OAAO,CAAG,iBAAiB,CAAGW,MAAM,CAAG,OAAO,CAAGe,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAC5F9B,KAAK,CAACmB,GAAG,CAACD,GAAG,CAAC,CACTE,IAAI,CAAEC,GAAG,EAAK,CACXR,YAAY,CAACQ,GAAG,CAACC,IAAI,CAACZ,QAAQ,CAAC,CAC/BO,WAAW,CAAC,IAAI,CAAC,CACrB,CAAC,CAAC,CACDM,KAAK,CAAEC,GAAG,EAAK,CACZC,KAAK,CAAC,aAAa,CAAC,CACxB,CAAC,CAAC,CAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEJ,CAAC,CAED,KAAM,CAAAM,cAAc,CAAIJ,KAAK,EAAK,CAC9B,GAAI,CAAAK,gBAAgB,CAAGtB,QAAQ,CAACuB,MAAM,CAAC,CAACC,IAAI,CAAEC,KAAK,GAAK,CACpD,GAAID,IAAI,CAACE,QAAQ,EAAIT,KAAK,CAAE,CACxB,MAAO,CAAAO,IAAI,CACf,CACJ,CAAC,CAAC,CACFrB,YAAY,CAACmB,gBAAgB,CAAC,CAClC,CAAC,CAED,KAAM,CAAAK,UAAU,CAAGA,CAACC,SAAS,CAAEC,CAAC,GAAK,CACjCA,CAAC,CAACC,eAAe,CAAC,CAAC,CACnB,GAAI,CAAAC,MAAM,CAAGZ,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAE3C,GAAI,CAACW,MAAM,CAAE,CACThB,KAAK,CAAC,qBAAqB,CAAC,CAC5B,OACJ,CAEA,KAAM,CAAAP,GAAG,CAAGf,OAAO,CAAG,eAAe,CACrC,KAAM,CAAAmB,IAAI,CAAG,CAAEmB,MAAM,CAAEH,SAAU,CAAC,CAClCtC,KAAK,CAAC0C,IAAI,CAACxB,GAAG,CAAEI,IAAI,CAAC,CAChBF,IAAI,CAAEC,GAAG,EAAK,CACX,GAAIA,GAAG,CAACC,IAAI,CAACqB,OAAO,CAAE,CAClBlB,KAAK,CAAC,QAAQ,CAAC,CACnB,CACJ,CAAC,CAAC,CACDF,KAAK,CAAEC,GAAG,EAAK,CACZC,KAAK,CAAC,aAAa,CAAC,CACxB,CAAC,CAAC,CAEV,CAAC,CAGD,KAAM,CAAAmB,aAAa,CAAIC,EAAE,EAAK,CAC1BpC,QAAQ,CAAC,WAAW,CAAGoC,EAAE,CAAC,CAC9B,CAAC,CAGD,mBACItC,KAAA,QAAAuC,QAAA,eACIzC,IAAA,CAACR,MAAM,EAACiB,MAAM,CAAEA,MAAO,CAACY,YAAY,CAAEA,YAAa,CAACE,WAAW,CAAEA,WAAY,CAAE,CAAC,cAChFvB,IAAA,CAACJ,UAAU,EAAC8B,cAAc,CAAEA,cAAe,CAAE,CAAC,CAC7Cf,QAAQ,EAAIJ,SAAS,eAClBL,KAAA,OAAAuC,QAAA,EAAI,iBACA,cAAAzC,IAAA,WAAQ0C,SAAS,CAAC,WAAW,CAACC,OAAO,CAAEA,CAAA,GAAM/B,WAAW,CAAC,KAAK,CAAE,CAAA6B,QAAA,CAAC,SAAO,CAAQ,CAAC,EACjF,CAAC,CAER9B,QAAQ,EAAIJ,SAAS,EAAIA,SAAS,CAACqC,MAAM,EAAI,CAAC,eAAI5C,IAAA,OAAAyC,QAAA,CAAI,oBAAkB,CAAI,CAAC,CAC7E9B,QAAQ,eAAIX,IAAA,QAAK0C,SAAS,CAAC,yCAAyC,CAAAD,QAAA,CAChElC,SAAS,EAAIF,QAAQ,CAACuC,MAAM,CAAG,CAAC,EAC7BrC,SAAS,CAACsC,GAAG,CAAC,CAAChB,IAAI,CAAEC,KAAK,GAAK,CAE3B,mBACI5B,KAAA,QAAoBwC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACrCzC,IAAA,QAAK2C,OAAO,CAAEA,CAAA,GAAMX,UAAU,CAACH,IAAI,CAACiB,GAAG,CAAE,CAACJ,SAAS,CAAC,UAAU,CAAAD,QAAA,cAC1DzC,IAAA,CAACH,OAAO,EAAC6C,SAAS,CAAC,OAAO,CAAE,CAAC,CAC5B,CAAC,cACN1C,IAAA,QAAK+C,KAAK,CAAC,OAAO,CAACC,MAAM,CAAC,OAAO,CAACC,GAAG,CAAEnD,OAAO,CAAG,GAAG,CAAG+B,IAAI,CAACqB,MAAO,CAAE,CAAC,cAEtEhD,KAAA,MAAGwC,SAAS,CAAC,KAAK,CAAAD,QAAA,EAAC,GAAC,CAACZ,IAAI,CAACsB,KAAK,CAAC,MAAI,CAACtB,IAAI,CAACE,QAAQ,CAAC,GAAC,EAAG,CAAC,cACxD7B,KAAA,OAAIwC,SAAS,CAAC,iBAAiB,CAAAD,QAAA,EAAC,GAAC,CAACZ,IAAI,CAACuB,KAAK,CAAC,GAAC,EAAI,CAAC,cACnDlD,KAAA,MAAGwC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,EAAC,GAAC,CAACZ,IAAI,CAACwB,KAAK,CAAC,GAAC,EAAG,CAAC,GAR5CxB,IAAI,CAACiB,GASV,CAAC,CAGd,CAAC,CAAC,CACL,CAAC,CAEL,CAACnC,QAAQ,eAAIX,IAAA,QAAK0C,SAAS,CAAC,yCAAyC,CAAAD,QAAA,CACjEpC,QAAQ,EAAIA,QAAQ,CAACuC,MAAM,CAAG,CAAC,EAC5BvC,QAAQ,CAACwC,GAAG,CAAC,CAAChB,IAAI,CAAEC,KAAK,GAAK,CAE1B,mBACI5B,KAAA,QAAKyC,OAAO,CAAEA,CAAA,GAAMJ,aAAa,CAACV,IAAI,CAACiB,GAAG,CAAE,CAAgBJ,SAAS,CAAC,UAAU,CAAAD,QAAA,eAC5EzC,IAAA,QAAK2C,OAAO,CAAGT,CAAC,EAAKF,UAAU,CAACH,IAAI,CAACiB,GAAG,CAAEZ,CAAC,CAAE,CAACQ,SAAS,CAAC,UAAU,CAAAD,QAAA,cAC9DzC,IAAA,CAACH,OAAO,EAAC6C,SAAS,CAAC,OAAO,CAAE,CAAC,CAC5B,CAAC,cACN1C,IAAA,QAAK+C,KAAK,CAAC,OAAO,CAACC,MAAM,CAAC,OAAO,CAACC,GAAG,CAAEnD,OAAO,CAAG,GAAG,CAAG+B,IAAI,CAACqB,MAAO,CAAE,CAAC,cACtEhD,KAAA,OAAIwC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,EAAC,OAAK,CAACZ,IAAI,CAACuB,KAAK,CAAC,MAAI,EAAI,CAAC,cACzDlD,KAAA,MAAGwC,SAAS,CAAC,KAAK,CAAAD,QAAA,EAAC,GAAC,CAACZ,IAAI,CAACsB,KAAK,CAAC,MAAI,CAACtB,IAAI,CAACE,QAAQ,CAAC,GAAC,EAAG,CAAC,cACxD7B,KAAA,MAAGwC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,EAAC,GAAC,CAACZ,IAAI,CAACwB,KAAK,CAAC,GAAC,EAAG,CAAC,GAPJxB,IAAI,CAACiB,GAQlD,CAAC,CAGd,CAAC,CAAC,CACL,CAAC,EAEL,CAAC,CAEd,CAEA,cAAe,CAAA3C,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}